{"version":3,"file":"provide-consume-context-container-0cff1e11.js","sources":["../../node_modules/@glimmer/util/dist/modules/es2017/lib/collections.js","../src/-private/provide-consume-context-container.ts"],"sourcesContent":["export function dict() {\n  return Object.create(null);\n}\nexport function isDict(u) {\n  return u !== null && u !== undefined;\n}\nexport function isObject(u) {\n  return typeof u === 'function' || typeof u === 'object' && u !== null;\n}\nexport class StackImpl {\n  constructor(values = []) {\n    this.current = null;\n    this.stack = values;\n  }\n\n  get size() {\n    return this.stack.length;\n  }\n\n  push(item) {\n    this.current = item;\n    this.stack.push(item);\n  }\n\n  pop() {\n    let item = this.stack.pop();\n    let len = this.stack.length;\n    this.current = len === 0 ? null : this.stack[len - 1];\n    return item === undefined ? null : item;\n  }\n\n  nth(from) {\n    let len = this.stack.length;\n    return len < from ? null : this.stack[len - from];\n  }\n\n  isEmpty() {\n    return this.stack.length === 0;\n  }\n\n  toArray() {\n    return this.stack;\n  }\n\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3BhY2thZ2VzL0BnbGltbWVyL3V0aWwvbGliL2NvbGxlY3Rpb25zLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLE9BQU0sU0FBVSxJQUFWLEdBQWM7QUFDbEIsU0FBTyxNQUFNLENBQUMsTUFBUCxDQUFjLElBQWQsQ0FBUDtBQUNEO0FBRUQsT0FBTSxTQUFVLE1BQVYsQ0FBb0IsQ0FBcEIsRUFBd0I7QUFDNUIsU0FBTyxDQUFDLEtBQUssSUFBTixJQUFjLENBQUMsS0FBSyxTQUEzQjtBQUNEO0FBRUQsT0FBTSxTQUFVLFFBQVYsQ0FBc0IsQ0FBdEIsRUFBMEI7QUFDOUIsU0FBTyxPQUFPLENBQVAsS0FBYSxVQUFiLElBQTRCLE9BQU8sQ0FBUCxLQUFhLFFBQWIsSUFBeUIsQ0FBQyxLQUFLLElBQWxFO0FBQ0Q7QUFFRCxPQUFNLE1BQU8sU0FBUCxDQUFnQjtBQUlwQixFQUFBLFdBQUEsQ0FBWSxNQUFBLEdBQWMsRUFBMUIsRUFBNEI7QUFGckIsU0FBQSxPQUFBLEdBQXFCLElBQXJCO0FBR0wsU0FBSyxLQUFMLEdBQWEsTUFBYjtBQUNEOztBQUVELE1BQVcsSUFBWCxHQUFlO0FBQ2IsV0FBTyxLQUFLLEtBQUwsQ0FBVyxNQUFsQjtBQUNEOztBQUVELEVBQUEsSUFBSSxDQUFDLElBQUQsRUFBUTtBQUNWLFNBQUssT0FBTCxHQUFlLElBQWY7QUFDQSxTQUFLLEtBQUwsQ0FBVyxJQUFYLENBQWdCLElBQWhCO0FBQ0Q7O0FBRUQsRUFBQSxHQUFHLEdBQUE7QUFDRCxRQUFJLElBQUksR0FBRyxLQUFLLEtBQUwsQ0FBVyxHQUFYLEVBQVg7QUFDQSxRQUFJLEdBQUcsR0FBRyxLQUFLLEtBQUwsQ0FBVyxNQUFyQjtBQUNBLFNBQUssT0FBTCxHQUFlLEdBQUcsS0FBSyxDQUFSLEdBQVksSUFBWixHQUFtQixLQUFLLEtBQUwsQ0FBVyxHQUFHLEdBQUcsQ0FBakIsQ0FBbEM7QUFFQSxXQUFPLElBQUksS0FBSyxTQUFULEdBQXFCLElBQXJCLEdBQTRCLElBQW5DO0FBQ0Q7O0FBRUQsRUFBQSxHQUFHLENBQUMsSUFBRCxFQUFhO0FBQ2QsUUFBSSxHQUFHLEdBQUcsS0FBSyxLQUFMLENBQVcsTUFBckI7QUFDQSxXQUFPLEdBQUcsR0FBRyxJQUFOLEdBQWEsSUFBYixHQUFvQixLQUFLLEtBQUwsQ0FBVyxHQUFHLEdBQUcsSUFBakIsQ0FBM0I7QUFDRDs7QUFFRCxFQUFBLE9BQU8sR0FBQTtBQUNMLFdBQU8sS0FBSyxLQUFMLENBQVcsTUFBWCxLQUFzQixDQUE3QjtBQUNEOztBQUVELEVBQUEsT0FBTyxHQUFBO0FBQ0wsV0FBTyxLQUFLLEtBQVo7QUFDRDs7QUFwQ21CIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGljdCwgT3B0aW9uLCBTdGFjayB9IGZyb20gJ0BnbGltbWVyL2ludGVyZmFjZXMnO1xuXG5leHBvcnQgZnVuY3Rpb24gZGljdDxUID0gdW5rbm93bj4oKTogRGljdDxUPiB7XG4gIHJldHVybiBPYmplY3QuY3JlYXRlKG51bGwpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNEaWN0PFQ+KHU6IFQpOiB1IGlzIERpY3QgJiBUIHtcbiAgcmV0dXJuIHUgIT09IG51bGwgJiYgdSAhPT0gdW5kZWZpbmVkO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNPYmplY3Q8VD4odTogVCk6IHUgaXMgb2JqZWN0ICYgVCB7XG4gIHJldHVybiB0eXBlb2YgdSA9PT0gJ2Z1bmN0aW9uJyB8fCAodHlwZW9mIHUgPT09ICdvYmplY3QnICYmIHUgIT09IG51bGwpO1xufVxuXG5leHBvcnQgY2xhc3MgU3RhY2tJbXBsPFQ+IGltcGxlbWVudHMgU3RhY2s8VD4ge1xuICBwcml2YXRlIHN0YWNrOiBUW107XG4gIHB1YmxpYyBjdXJyZW50OiBPcHRpb248VD4gPSBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKHZhbHVlczogVFtdID0gW10pIHtcbiAgICB0aGlzLnN0YWNrID0gdmFsdWVzO1xuICB9XG5cbiAgcHVibGljIGdldCBzaXplKCkge1xuICAgIHJldHVybiB0aGlzLnN0YWNrLmxlbmd0aDtcbiAgfVxuXG4gIHB1c2goaXRlbTogVCkge1xuICAgIHRoaXMuY3VycmVudCA9IGl0ZW07XG4gICAgdGhpcy5zdGFjay5wdXNoKGl0ZW0pO1xuICB9XG5cbiAgcG9wKCk6IE9wdGlvbjxUPiB7XG4gICAgbGV0IGl0ZW0gPSB0aGlzLnN0YWNrLnBvcCgpO1xuICAgIGxldCBsZW4gPSB0aGlzLnN0YWNrLmxlbmd0aDtcbiAgICB0aGlzLmN1cnJlbnQgPSBsZW4gPT09IDAgPyBudWxsIDogdGhpcy5zdGFja1tsZW4gLSAxXTtcblxuICAgIHJldHVybiBpdGVtID09PSB1bmRlZmluZWQgPyBudWxsIDogaXRlbTtcbiAgfVxuXG4gIG50aChmcm9tOiBudW1iZXIpOiBPcHRpb248VD4ge1xuICAgIGxldCBsZW4gPSB0aGlzLnN0YWNrLmxlbmd0aDtcbiAgICByZXR1cm4gbGVuIDwgZnJvbSA/IG51bGwgOiB0aGlzLnN0YWNrW2xlbiAtIGZyb21dO1xuICB9XG5cbiAgaXNFbXB0eSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5zdGFjay5sZW5ndGggPT09IDA7XG4gIH1cblxuICB0b0FycmF5KCk6IFRbXSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhY2s7XG4gIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=","import type { ComponentInstance } from '@glimmer/interfaces';\nimport { Stack } from '@glimmer/util';\nimport type ContextRegistry from '../context-registry';\nimport { registerDestructor } from '@ember/destroyable';\n\n// We set a property with this key on component instances that are context providers, to store\n// the component property names that are registered to specific context names.\nexport const EMBER_PROVIDE_CONSUME_CONTEXT_KEY = Symbol.for(\n  'EMBER_PROVIDE_CONSUME_CONTEXT_KEY',\n);\n\nexport function setContextMetadataOnContextProviderInstance(\n  instance: any,\n  contextDefinitions: [\n    contextKey: keyof ContextRegistry,\n    propertyKey: string,\n  ][],\n) {\n  const currentContexts = Object.getOwnPropertyDescriptor(\n    instance,\n    EMBER_PROVIDE_CONSUME_CONTEXT_KEY,\n  );\n\n  const contextsValue = {\n    ...currentContexts?.value,\n    ...Object.fromEntries(contextDefinitions),\n  };\n\n  Object.defineProperty(instance, EMBER_PROVIDE_CONSUME_CONTEXT_KEY, {\n    value: contextsValue,\n    writable: true,\n    configurable: true,\n  });\n}\n\ninterface Contexts {\n  [contextKey: keyof ContextRegistry]: ContextEntry;\n}\n\ninterface ContextEntry {\n  // instance is an instance of a Glimmer component, or a \"mock provider\" from test-support helpers\n  instance: any;\n  // the property to read from the provider instance\n  key: string;\n}\n\nexport class ProvideConsumeContextContainer {\n  private stack = new Stack();\n\n  get current() {\n    return this.stack.current;\n  }\n\n  // The keys of the WeakMap are component instances (actual Glimmer components,\n  // not the VM ones).\n  // The values are objects that map a string ID (provider ID) to the provider\n  // component instance.\n  // \"parentContexts\" contain references to contexts coming from \"above\", and\n  // are used to read values from (which allows a component to provide and consume the same key)\n  parentContexts = new WeakMap<any, Contexts>();\n  // \"nextContexts\" are context maps used to propagate context values down\n  // into the component tree, which includes the merged providers from the\n  // current component (if any)\n  nextContexts = new WeakMap<any, Contexts>();\n\n  // Global contexts are registered by test-support helpers to allow easily\n  // providing context values in tests.\n  #globalContexts: Contexts | null = null;\n\n  #isCreatingComponent = false;\n\n  begin(): void {\n    this.reset();\n  }\n\n  commit(): void {\n    this.reset();\n  }\n\n  private reset(): void {\n    if (this.stack.size !== 0) {\n      while (!this.stack.isEmpty()) {\n        this.stack.pop();\n      }\n    }\n  }\n\n  registerMockProvider = <\n    T extends keyof ContextRegistry,\n    U extends ContextRegistry[T],\n  >(\n    name: T,\n    value: U,\n  ) => {\n    const mockProviderContext = {\n      instance: {\n        get value() {\n          return value;\n        },\n      },\n      key: 'value',\n    };\n\n    if (this.#globalContexts?.[name] != null) {\n      console.warn(\n        `A context provider with name \"${name}\" is already defined, and will be overwritten.`,\n      );\n    }\n\n    this.#globalContexts = {\n      ...this.#globalContexts,\n      [name]: mockProviderContext,\n    };\n  };\n\n  enter(instance: ComponentInstance): void {\n    // When \"enter\" is called, a component instance has already been created.\n    // Update the flag to reflect that.\n    // See the \"contextsFor\" method below for how this flag is used.\n    this.#isCreatingComponent = false;\n\n    const actualComponentInstance = (instance?.state as any)?.component;\n\n    if (actualComponentInstance != null) {\n      const isProviderInstance =\n        actualComponentInstance[EMBER_PROVIDE_CONSUME_CONTEXT_KEY] != null;\n\n      if (isProviderInstance) {\n        this.registerProvider(actualComponentInstance);\n      } else {\n        this.registerComponent(actualComponentInstance);\n      }\n\n      this.stack.push(actualComponentInstance);\n    }\n  }\n\n  exit(instance: ComponentInstance): void {\n    const actualComponentInstance = (instance?.state as any)?.component;\n\n    if (actualComponentInstance != null) {\n      this.stack.pop();\n    }\n  }\n\n  private registerProvider(provider: any) {\n    const parentContexts: Contexts = this.currentContexts();\n    const mergedContexts: Contexts = { ...parentContexts };\n\n    const registeredContexts = provider[EMBER_PROVIDE_CONSUME_CONTEXT_KEY];\n\n    // If the provider has registered contexts, store references\n    // to them on the current contexts object\n    if (registeredContexts != null) {\n      Object.entries(\n        registeredContexts as Record<keyof ContextRegistry, string>,\n      ).forEach(([contextKey, key]) => {\n        if (key in provider) {\n          mergedContexts[contextKey] = {\n            instance: provider,\n            key,\n          };\n        }\n      });\n    }\n\n    const isNew = !this.parentContexts.has(provider);\n    this.parentContexts.set(provider, parentContexts);\n    this.nextContexts.set(provider, mergedContexts);\n    if (isNew) {\n      registerDestructor(provider, () => {\n        this.parentContexts.delete(provider);\n        this.nextContexts.delete(provider);\n      });\n    }\n  }\n\n  private registerComponent(component: any) {\n    const currentContexts = this.currentContexts();\n\n    const isNew = !this.parentContexts.has(component);\n    this.parentContexts.set(component, currentContexts);\n    this.nextContexts.set(component, currentContexts);\n    if (isNew) {\n      registerDestructor(component, () => {\n        this.parentContexts.delete(component);\n        this.nextContexts.delete(component);\n      });\n    }\n  }\n\n  currentContexts() {\n    const { current } = this;\n\n    const globalContexts = this.#globalContexts ?? {};\n\n    if (\n      this.nextContexts.has(current) ||\n      Object.keys(globalContexts).length > 0\n    ) {\n      const context = this.nextContexts.get(current);\n      return { ...globalContexts, ...context };\n    }\n\n    return {};\n  }\n\n  contextsFor(component: any) {\n    if (this.parentContexts.has(component)) {\n      return this.parentContexts.get(component);\n    }\n\n    // If a context for this component is not yet registered, but\n    // we're in the phase of initializing a component, return\n    // the current contexts, so that the values can be read in constructors.\n    if (this.#isCreatingComponent) {\n      return this.currentContexts();\n    }\n\n    return null;\n  }\n\n  createComponent() {\n    // Indicates that a component instance is being created, see\n    // \"contextsFor\" above for how we use this.\n    this.#isCreatingComponent = true;\n  }\n}\n"],"names":["StackImpl","constructor","values","current","stack","size","length","push","item","pop","len","undefined","nth","from","isEmpty","toArray","EMBER_PROVIDE_CONSUME_CONTEXT_KEY","Symbol","for","setContextMetadataOnContextProviderInstance","instance","contextDefinitions","currentContexts","Object","getOwnPropertyDescriptor","contextsValue","value","fromEntries","defineProperty","writable","configurable","_globalContexts","WeakMap","_isCreatingComponent","ProvideConsumeContextContainer","_defineProperty","Stack","_classPrivateFieldInitSpec","name","mockProviderContext","key","_classPrivateFieldGet","console","warn","_classPrivateFieldSet","begin","reset","commit","enter","actualComponentInstance","state","component","isProviderInstance","registerProvider","registerComponent","exit","provider","parentContexts","mergedContexts","registeredContexts","entries","forEach","contextKey","isNew","has","set","nextContexts","registerDestructor","delete","globalContexts","keys","context","get","contextsFor","createComponent"],"mappings":"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","x_google_ignoreList":[0]}