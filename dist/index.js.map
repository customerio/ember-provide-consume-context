{"version":3,"file":"index.js","sources":["../src/-private/decorators.ts"],"sourcesContent":["import type ContextRegistry from '../context-registry';\nimport { EMBER_PROVIDE_CONSUME_CONTEXT_KEY } from './provide-consume-context-container';\nimport { getContextValue, hasContext } from './utils';\n\nexport function provide(contextKey: keyof ContextRegistry) {\n  return function decorator(target: any, key: string) {\n    // Define a property on the class, which will later be used on instances of\n    // the component to register them as context providers.\n    const currentContexts = Object.getOwnPropertyDescriptor(\n      target,\n      EMBER_PROVIDE_CONSUME_CONTEXT_KEY,\n    );\n\n    // A class can have multiple @provide decorated properties, we need to\n    // merge the definitions\n    const contextsValue = {\n      ...currentContexts?.value,\n      [contextKey]: key,\n    };\n\n    Object.defineProperty(target, EMBER_PROVIDE_CONSUME_CONTEXT_KEY, {\n      value: contextsValue,\n      writable: true,\n      configurable: true,\n    });\n  };\n}\n\nexport function consume<K extends keyof ContextRegistry>(\n  contextKey: K,\n): PropertyDecorator {\n  return function decorator() {\n    return {\n      get(): ContextRegistry[K] | undefined {\n        if (hasContext(this, contextKey)) {\n          return getContextValue(this, contextKey);\n        }\n\n        return undefined;\n      },\n    };\n  };\n}\n"],"names":["provide","contextKey","decorator","target","key","currentContexts","Object","getOwnPropertyDescriptor","EMBER_PROVIDE_CONSUME_CONTEXT_KEY","contextsValue","value","defineProperty","writable","configurable","consume","get","hasContext","getContextValue","undefined"],"mappings":";;;AAIO,SAASA,OAAOA,CAACC,UAAiC,EAAE;AACzD,EAAA,OAAO,SAASC,SAASA,CAACC,MAAW,EAAEC,GAAW,EAAE;AAClD;AACA;IACA,MAAMC,eAAe,GAAGC,MAAM,CAACC,wBAAwB,CACrDJ,MAAM,EACNK,iCACF,CAAC,CAAA;;AAED;AACA;AACA,IAAA,MAAMC,aAAa,GAAG;MACpB,GAAGJ,eAAe,EAAEK,KAAK;AACzB,MAAA,CAACT,UAAU,GAAGG,GAAAA;KACf,CAAA;AAEDE,IAAAA,MAAM,CAACK,cAAc,CAACR,MAAM,EAAEK,iCAAiC,EAAE;AAC/DE,MAAAA,KAAK,EAAED,aAAa;AACpBG,MAAAA,QAAQ,EAAE,IAAI;AACdC,MAAAA,YAAY,EAAE,IAAA;AAChB,KAAC,CAAC,CAAA;GACH,CAAA;AACH,CAAA;AAEO,SAASC,OAAOA,CACrBb,UAAa,EACM;EACnB,OAAO,SAASC,SAASA,GAAG;IAC1B,OAAO;AACLa,MAAAA,GAAGA,GAAmC;AACpC,QAAA,IAAIC,UAAU,CAAC,IAAI,EAAEf,UAAU,CAAC,EAAE;AAChC,UAAA,OAAOgB,eAAe,CAAC,IAAI,EAAEhB,UAAU,CAAC,CAAA;AAC1C,SAAA;AAEA,QAAA,OAAOiB,SAAS,CAAA;AAClB,OAAA;KACD,CAAA;GACF,CAAA;AACH;;;;"}